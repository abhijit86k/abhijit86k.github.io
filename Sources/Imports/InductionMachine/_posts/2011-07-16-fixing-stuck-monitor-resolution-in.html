---
layout: post
title: Fixing Stuck Monitor Resolution in Ubuntu
date: '2011-07-16T05:01:00.001+05:30'
author: Abhijit Kshirsagar
tags:
- intel
- Ubuntu
- stuck resolution
- xorg.conf
- graphics
- xrandr
modified_time: '2012-08-17T14:58:27.907+05:30'
---

<div dir="ltr" style="text-align: left;" trbidi="on">After a few hours of thrashing around trying to get my graphics card to show the right display resolution I finally managed to do it. Here's a pretty comprehensive set of stuff you can try in case you find yourself in a similar predicament...<br /><br />(P.S. Newbies be prepared to do a lot of learning...)<br /><br />(P.P.S: The following worked for me on an Intel desktop motherboard (DG31PR) with Intel Integrated Graphics and a widescreen monitor (LG Flatron W1934S) Before embarking on the following, do ensure that your hardware does support the resolution you want.)<br /><br />(P.P.P.S: Turns out the <a href="http://abhijit-kshirsagar.blogspot.in/2011/08/fixing-native-resolution-problem-in.html" target="_blank">procedure for doing this in Windows</a> is even harder, but I eventually managed it...)<br /><br />(P.P.P.P.S: There are a few changes for later versions of Ubuntu, updated in the text of the post.) <br /><br /><b>The symptoms:</b><br />You either got a new monitor, or just disconnected and re-conected the monitor, updated something, reinstalled something, whatever. The result is that you are stuck with a monitor resolution like 800x600 or 1024x768 on Ubuntu. Here's what you need to do...<br /><br /><ol><li>First off, go the Monitors menu (System &gt; Preferences &gt; Monitors) and see if any higher resolution is available. If you got around to reading this, I'm guessing not. Check the box for 'show monitors in panel' - we're going to be needing this pretty often.</li><li>Some solutions on the web ask you to use a disk for Ubuntu 8.04 or older - just ignore these. Its not worth going to the trouble of downloading the ISO and burning it or even making a bootable USB drive.</li><li>There are the following tools that you can use - (I dont know which of these will work but one of them will do the job)</li><ol><li> The "recovery" option from the grub menu (which appears before you boot)</li><li>The xorg.conf file and </li><li>The xrandr command</li></ol></ol><b>Recovery Option:</b><br />The recovery option is useful as a quick option in case things were working normally earlier. Select recovery, and then from the prompt that comes up select "X in safemode". This then gives you a number of options - first try the option that will recover your settings from the backup file. (Reboot to see if this has any effect - you can do this by using the root prompt). If this does not work, or if its a new piece of hardware that caused the problem, select "Create a new hardware configuration". If this succeeds you will see a dialog box with a message. If it fails nothing happens; and you need to fiddle around with the xorg.conf file.<br /><br />[Ubuntu 12.04 update: no options are provided, at least for me. By now I know that there is something severely screwed up either with my graphics card or monitor or the combination. So on to the next step] <br /><br /><b>The xorg.conf file</b>:<br />This is a configuration file that stores settings for Xorg. It is located in /etc/X11. From Ubuntu 9.04 onwards there is no xorg.conf file shipped with the OS. X will, at startup, try to detect and apply all settings if no file is found. If a file is found it will use it for its settings. Making a xorg.conf file from scratch is a pain. Its content depends on your graphics card _and_ your monitor. To create a fresh xorg.conf use the command: <br /><br /><blockquote style="color: #351c75;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">X -configure&nbsp;</span></blockquote><br /><br /><span style="font-family: inherit;">This will generate a file called xorg.conf.new. Open it with a text editor and make all modifications. Then rename it to xorg.conf and move it to /etc/X11/ .&nbsp;</span><br /><span style="font-family: inherit;">The additions that will need to be made are in the 'monitor' section, where you must add the video timing data for the resolution you desire. To get the timings, run the command&nbsp;</span><br /><br /><blockquote style="color: #351c75;"><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">cvt 1024 768</div></blockquote><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit;">Where 1024 and 768 are example values of resolution. The output will be something like:</span><br /><blockquote style="color: #351c75;"><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"># 1440x900 59.89 Hz (CVT 1.30MA) hsync: 55.93 kHz; pclk: 106.50 MHz<br />Modeline "1440x900_60.00"&nbsp; 106.50&nbsp; 1440 1528 1672 1904&nbsp; 900 903 909 934 -hsync +vsync</span></div></blockquote><span style="font-family: inherit;"><br /></span><br /><span style="font-family: inherit;">Out of this copy the line&nbsp;</span><br /><blockquote style="color: #351c75; font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">"Modeline "1440x900_60.00"&nbsp; 106.50&nbsp; 1440 1528 1672 1904&nbsp; 900 903 909 934 -hsync +vsync</span></blockquote><br /><span style="font-family: inherit;">and paste it in the monitor section in the new file:</span><br /><br /><blockquote><span style="font-family: inherit;"><span style="color: #351c75; font-family: &quot;Courier New&quot;,Courier,monospace; font-size: xx-small;">Section "Monitor"<br />Identifier&nbsp;&nbsp; "Monitor0"<br />VendorName&nbsp;&nbsp; "Monitor Vendor"<br />ModelName&nbsp;&nbsp;&nbsp; "Monitor Model"<br />#Modeline "1280x960_60.00"&nbsp; 101.25&nbsp; 1280 1360 1488 1696&nbsp; 960 963 967 996 -hsync +vsync<br />#Modeline "1600x900_60.00"&nbsp; 118.25&nbsp; 1600 1696 1856 2112&nbsp; 900 903 908 934 -hsync +vsync<br />EndSection</span></span></blockquote><span style="font-family: inherit;"> </span><br /><span style="font-family: inherit;"><br /></span><br />Then copy the file off as /etc/X11/xorg.conf ; making sure that the old file, if any, is backed up. Then restart gdm using<br /><blockquote style="color: #351c75; font-family: &quot;Courier New&quot;,Courier,monospace;">sudo /etc.init.d/gdm restart</blockquote><br /><br /><b>Using xrandr</b>:<br /><br />Boot into Ubuntu and start a terminal. Use xrandr to list all supported modes and active devices.<br /><br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span style="color: #351c75;">$ xrandr </span><br style="color: #351c75;" /><span style="color: #351c75;"> Screen 0: minimum 320 x 200, current 1440 x 900, maximum 4096 x 4096</span><br style="color: #351c75;" /><span style="color: #351c75;"> VGA1 connected 1440x900+0+0 (normal left inverted right x axis y axis) 0mm x 0mm</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 1360x768&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 59.8 &nbsp;</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 1024x768&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60.0 &nbsp;</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 800x600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60.3&nbsp;&nbsp;&nbsp;&nbsp; 56.2 &nbsp;</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 848x480&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60.0 &nbsp;</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 640x480&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 59.9&nbsp;&nbsp;&nbsp;&nbsp; 59.9 &nbsp;</span><br style="color: #351c75;" /><span style="color: #351c75;"> &nbsp;&nbsp; 1440x900_60.00&nbsp;&nbsp; 59.9* </span></span></blockquote>Evaluate the video timings using cvt as explained above.<br />Create a new mode using the command<br /><br /><blockquote><span style="color: #351c75; font-family: &quot;Courier New&quot;,Courier,monospace; font-size: small;">xrandr --newmode "1440x900_60.00"&nbsp; 106.50&nbsp; 1440 1528 1672 1904&nbsp; 900 903 909 934 -hsync +vsyn</span></blockquote>(The values are taken from the output of cvt; note that the quotes are required here)<br /><br />Then add this as one of the available modes using the command:<br /><blockquote style="color: #351c75;"><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">xrandr --addmode VGA1 1440x900_60.00</div></blockquote><br />(Note: No quotes here)<br /><br />Then select this mode:<br /><blockquote><div style="color: #351c75; font-family: &quot;Courier New&quot;,Courier,monospace;">xrandr --output VGA1 --mode 1440x900_60.00 <span style="font-size: xx-small;"><span style="color: black; font-family: Arial,Helvetica,sans-serif;">[1]</span></span></div></blockquote><br /><br />(Where VGA1 is the device that is shown as active in the output of the command xrandr)<br /><br />If these steps work you may want to make these resolution settings permanent.<br /><br />If you use gdm then simply add the last three commands to the /etc/gdm/Init/Default file; after the line <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">OLD_IFS=$IFS.</span> And thats that!<br /><br />If you use lightdm then you need to edit the /etc/lightdm/lightdm.conf file as explained <a href="http://www.mattfischer.com/blog/?p=154" target="_blank">here</a>. Only one additional point - there are two entries in lightdm.conf that set the variable display-setup-script. Keep the first entry commented out and set the value using the second.<br /><br />[1] There was a typo in this line which has been fixed.</div>